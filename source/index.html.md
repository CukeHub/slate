---
title: API Reference

language_tabs:
  - ruby

toc_footers:
  - <a href='#'>Sign Up for a Developer Key</a>
  - <a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a>

includes:
  - errors

search: true
---

# Introduction

Welcome to the CukeHub API! You can use our API to send all Cucumber Scenarios to the CukeHub API endpoints.  CukeHub allows you to audit and share all of your Automated Cucumber Test Results that may run from any machine with the CukeHub RubyGem and the CukeHub App API Key provided at cukehub.com.

This example API documentation page was created with [Slate](https://github.com/tripit/slate). 


# CukeHub RubyGem
The CukeHub Gem is available at [RubyGems.org](https://rubygems.org/gems/cukehub)

# GetStarted
 Steps    | Description
--------- | -----------
    1.    | Create a New TestApp at [cukehub.com/apps](https://cukehub.com/apps)
	2.    | Copy autogenerated CukeHub API Key from TestApp
	3.    | Paste `@cukehub_api_key = <key_value>` to features/support/env.rb 
	4.	  | Add `gem 'cukehub'` to your Gemfile
	5.    | `$ bundle install`
	6.    | Run `$ cucumber` Tests
	7.    | See Results at [cukehub.com/apps](https://cukehub.com/apps)

## Hooks

```ruby
require 'httparty'
require 'os'

if OS.mac? then
  os = "OSX"
elsif OS.linux?
  os = "Linux"
elsif OS.doze?
  os = "Win"
end

Before do
    @start = Time.now
end

After do |scenario|
  IO.popen("git symbolic-ref --short HEAD") {|pipe| puts @git_branch = pipe.read }
  IO.popen("git rev-parse --verify HEAD") {|pipe| puts @git_sha = pipe.read }
  params = {
    api_key: @cukehub_api_key,
    name:   scenario.name,
    location: scenario.location,
    tag: scenario.source_tag_names,
    status: scenario.status.upcase,
    machine: Socket.gethostname,
    os: os,
    runtime: (Time.now - @start),
    domain: @domain,
    branch: @git_branch.chomp,
    sha: @git_sha.chomp,
  }
  params[:browser] = @browser.browser.upcase unless @browser.nil?
  params[:exception]=scenario.exception.message unless scenario.passed?

  HTTParty.post("https://cukehub.com/api/v1/results", body: params)
end   
```

The Custom CukeHub After Block sends all Scenario Cukes to a User's CukeHub App Account over SSL.

### HTTP Request

`HTTParty.post("https://cukehub.com/api/v1/results", body: params)`

### Parameters

Parameter  | Description
---------  | -----------
api_key:   | Stores Cucumber Scenarios and Runs for a specific App at CukeHub.
name:      | Stores the Cucumber Scenario Name.
location:  | Stores the Cucumber Feature File Path.
tag:       | Stores the Cucumebr Tag associated with the Cucumber Scenario.
status:    | Stores the Cucumber Scenario Status at Runtime [PASSED, FAILED, PENDING]
machine:   | Stores the Machine the Cucumber Scenario was executed on. [Socket.gethostname]
os:        | Stores the Operating System the Cucumber Scenario was executed in. [OSX, LINUX, WINDOWS]
runtime:   | Stores the Total Runtime it took for the Cucumber Scenario to complete.
domain:    | If the param exists, CukeHub stores the domain the Scenario ran against.  [ ex. @domain = staging.cukehub.com ] 
branch:    | If the param exists, Stores the git branch the Scenario ran on.
sha:       | If the param exists, Stores the git SHA the Scenario ran in.
browser:   | If the param exists, CukeHub stores the brower the Scenario ran in. [ ex. @browser = Selenium::WebDriver.for :chrome ]
exception: | If the param exists, Stores the Exception Error for a FAILED Cucumber Scenario.

<aside class="success">
Happy Testing!
</aside>

